# Исправление ошибки DNS для mbcex.ru

## Проблема

Ошибка: `InvalidDNSError` - GitHub Pages не может найти правильные DNS записи для домена mbcex.ru

## Решение

### Для корневого домена mbcex.ru нужно использовать A записи (не CNAME!)

У вашего регистратора домена (у кого вы арендовали домен) добавьте **4 A записи**:

#### Настройка A записей:

1. **Зайдите в панель управления DNS** вашего регистратора домена
2. **Найдите раздел DNS Records / DNS Management / DNS Zone**
3. **Добавьте 4 A записи** с такими параметрами:

    **Запись 1:**
    - Тип: `A`
    - Имя (Host/Name): `@` или оставьте пустым (для корневого домена)
    - Значение (Value/Points to): `185.199.108.153`
    - TTL: `3600` или автоматически

    **Запись 2:**
    - Тип: `A`
    - Имя: `@` или пустое
    - Значение: `185.199.109.153`
    - TTL: `3600`

    **Запись 3:**
    - Тип: `A`
    - Имя: `@` или пустое
    - Значение: `185.199.110.153`
    - TTL: `3600`

    **Запись 4:**
    - Тип: `A`
    - Имя: `@` или пустое
    - Значение: `185.199.111.153`
    - TTL: `3600`

### Важно:

- ❌ **НЕ используйте CNAME** для корневого домена (mbcex.ru без www)
- ✅ **Используйте только A записи** для корневого домена
- ✅ Если хотите использовать www.mbcex.ru - для него используйте CNAME → `dolgikhgram.github.io`

### После добавления A записей:

1. **Подождите 5-30 минут** для распространения DNS изменений

2. **Проверьте DNS записи:**

    ```bash
    dig mbcex.ru A +short
    ```

    Должны вернуться 4 IP адреса:

    ```
    185.199.108.153
    185.199.109.153
    185.199.110.153
    185.199.111.153
    ```

3. **В GitHub Pages настройках:**
    - Откройте `Settings` → `Pages`
    - В разделе `Custom domain` убедитесь, что указан `mbcex.ru`
    - Нажмите **"Save"** (если домен уже добавлен)
    - Или нажмите **"Check again"** для проверки DNS

4. **Если все настроено правильно:**
    - Выполните деплой:
    ```bash
    npm run deploy:custom
    ```

## Примеры для популярных регистраторов

### Для REG.RU (российский регистратор):

1. Зайдите в "Мои домены" → выберите mbcex.ru
2. Перейдите в "DNS серверы и зона"
3. В разделе "Записи" добавьте 4 A записи:
    - Тип: `A`
    - Поддомен: `@` (или оставьте пустым)
    - IP-адрес: `185.199.108.153` (для первой записи)
    - Повторите для остальных 3 IP адресов

### Для Timeweb, Beget и других:

1. Зайдите в панель управления → DNS настройки
2. Добавьте A записи:
    - Host: `@` или пустое
    - Type: `A`
    - Value: `185.199.108.153` (первая запись)
    - Добавьте остальные 3 записи с другими IP

## Проверка правильности настройки

После настройки DNS проверьте через командную строку:

```bash
# Проверка A записей
dig mbcex.ru A +short

# Должно вернуться:
# 185.199.108.153
# 185.199.109.153
# 185.199.110.153
# 185.199.111.153
```

Или используйте онлайн инструменты:

- https://www.whatsmydns.net/#A/mbcex.ru
- https://mxtoolbox.com/SuperTool.aspx?action=a%3ambcex.ru

## Исправление ошибки для www.mbcex.ru

### Проблема: InvalidARecordError

Для поддомена `www.mbcex.ru` установлена A запись, а нужна CNAME запись.

### Решение:

1. **Удалите A запись для www:**
    - В панели управления DNS найдите A запись для `www`
    - Удалите её (сейчас она указывает на IP `194.58.112.174`)

2. **Добавьте CNAME запись для www:**
    - Имя (Host/Name): `www`
    - Тип: `CNAME`
    - Значение (Value/Target): `dolgikhgram.github.io`
    - TTL: `3600`

3. **В GitHub Pages:**
    - `Settings` → `Pages` → `Custom domain`
    - Если указан `www.mbcex.ru` - оставьте как есть
    - Если указан `mbcex.ru` - можно оставить или добавить `www.mbcex.ru`
    - Нажмите "Save" и затем "Check again"

4. **Проверьте через 15-30 минут:**

    ```bash
    dig www.mbcex.ru CNAME +short
    ```

    Должно вернуться: `dolgikhgram.github.io`

### Важно:

- ✅ Для `mbcex.ru` (без www) - используйте **A записи** (4 штуки)
- ✅ Для `www.mbcex.ru` - используйте **CNAME** → `dolgikhgram.github.io`
- ❌ Не используйте A записи для www поддомена

## Альтернативное решение (если A записи не работают)

Если у вашего регистратора есть проблемы с A записями, можно использовать только поддомен www:

1. **Добавьте CNAME запись:**
    - Имя: `www`
    - Тип: `CNAME`
    - Значение: `dolgikhgram.github.io`

2. **В GitHub Pages укажите домен:** `www.mbcex.ru`

3. **Обновите CNAME файл:**

    ```bash
    echo "www.mbcex.ru" > public/CNAME
    ```

4. **Настройте редирект** с mbcex.ru на www.mbcex.ru (у большинства регистраторов есть эта опция)

## Контакты поддержки

Если проблема не решается:

- Проверьте документацию вашего регистратора домена по настройке DNS
- Обратитесь в поддержку регистратора для проверки настроек DNS
- Проверьте документацию GitHub: https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site

## Если ошибка сохраняется

1. Проверьте, что A записи действительно добавлены (используйте dig или онлайн инструменты)
2. Убедитесь, что прошло минимум 30 минут после добавления записей
3. В GitHub Pages нажмите "Check again"
4. Убедитесь, что файл `public/CNAME` содержит `mbcex.ru` (без www)
5. Проверьте, что нет других DNS записей, которые могут конфликтовать (например, старые CNAME записи)

## Контакты поддержки

Если проблема не решается:

- Проверьте документацию вашего регистратора домена по настройке DNS
- Обратитесь в поддержку регистратора для проверки настроек DNS
- Проверьте документацию GitHub: https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site
